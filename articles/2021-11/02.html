<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C/S Rendering | GStarP Diary</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/gstarp-diary/assets/css/0.styles.74bd36ba.css" as="style"><link rel="preload" href="/gstarp-diary/assets/js/app.da5adff4.js" as="script"><link rel="preload" href="/gstarp-diary/assets/js/2.9d11ca1f.js" as="script"><link rel="preload" href="/gstarp-diary/assets/js/22.6cd3503a.js" as="script"><link rel="prefetch" href="/gstarp-diary/assets/js/10.ea80b513.js"><link rel="prefetch" href="/gstarp-diary/assets/js/11.ecaa5c0c.js"><link rel="prefetch" href="/gstarp-diary/assets/js/12.ac5115d6.js"><link rel="prefetch" href="/gstarp-diary/assets/js/13.69eef5f6.js"><link rel="prefetch" href="/gstarp-diary/assets/js/14.c4f48ea7.js"><link rel="prefetch" href="/gstarp-diary/assets/js/15.ce550c95.js"><link rel="prefetch" href="/gstarp-diary/assets/js/16.cc11f165.js"><link rel="prefetch" href="/gstarp-diary/assets/js/17.fa98ddfa.js"><link rel="prefetch" href="/gstarp-diary/assets/js/18.835554f2.js"><link rel="prefetch" href="/gstarp-diary/assets/js/19.53745fb8.js"><link rel="prefetch" href="/gstarp-diary/assets/js/20.ce85a19d.js"><link rel="prefetch" href="/gstarp-diary/assets/js/21.a2ab9cdf.js"><link rel="prefetch" href="/gstarp-diary/assets/js/23.736fc9f6.js"><link rel="prefetch" href="/gstarp-diary/assets/js/24.d1bee47a.js"><link rel="prefetch" href="/gstarp-diary/assets/js/25.a8cecf4d.js"><link rel="prefetch" href="/gstarp-diary/assets/js/3.f5103ed0.js"><link rel="prefetch" href="/gstarp-diary/assets/js/4.07f080d5.js"><link rel="prefetch" href="/gstarp-diary/assets/js/5.19ff5901.js"><link rel="prefetch" href="/gstarp-diary/assets/js/6.5a4068b1.js"><link rel="prefetch" href="/gstarp-diary/assets/js/7.1a2fb34f.js"><link rel="prefetch" href="/gstarp-diary/assets/js/8.beb5dcf7.js"><link rel="prefetch" href="/gstarp-diary/assets/js/9.3f735d1c.js">
    <link rel="stylesheet" href="/gstarp-diary/assets/css/0.styles.74bd36ba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gstarp-diary/" class="home-link router-link-active"><!----> <span class="site-name">GStarP Diary</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/gstarp-diary/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/gstarp-diary/articles/about.html" class="nav-link">
  关于
</a></div> <a href="https://github.com/GStarP" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/gstarp-diary/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/gstarp-diary/articles/about.html" class="nav-link">
  关于
</a></div> <a href="https://github.com/GStarP" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/gstarp-diary/articles/" aria-current="page" class="sidebar-link">导语</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/gstarp-diary/articles/2020-07" class="sidebar-heading clickable"><span>2020-07</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/gstarp-diary/articles/2020-08" class="sidebar-heading clickable"><span>2020-08</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/gstarp-diary/articles/2021-08" class="sidebar-heading clickable"><span>2021-08</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/gstarp-diary/articles/2021-10" class="sidebar-heading clickable"><span>2021-10</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/gstarp-diary/articles/2021-11" class="sidebar-heading clickable router-link-active open"><span>2021-11</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/gstarp-diary/articles/2021-11/02.html" aria-current="page" class="active sidebar-link">C/S Rendering</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gstarp-diary/articles/2021-11/02.html#发展历程" class="sidebar-link">发展历程</a></li><li class="sidebar-sub-header"><a href="/gstarp-diary/articles/2021-11/02.html#未来方向" class="sidebar-link">未来方向</a></li><li class="sidebar-sub-header"><a href="/gstarp-diary/articles/2021-11/02.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/gstarp-diary/articles/2021-11/03.html" class="sidebar-link">RSC</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="c-s-rendering"><a href="#c-s-rendering" class="header-anchor">#</a> C/S Rendering</h1> <h2 id="发展历程"><a href="#发展历程" class="header-anchor">#</a> 发展历程</h2> <h3 id="完全-csr"><a href="#完全-csr" class="header-anchor">#</a> 完全 CSR</h3> <p>最早，网页只有简单的信息展示，没有服务端，只有服务器返回静态资源。这是完全的 Client Side Rendering。</p> <p>以下是完全 CSR 的流程，其中 C 代表客户端：</p> <ul><li>C 请求页面</li> <li>服务器返回 HTML 文件</li> <li>C 解析 HTML 文件为 DOM，请求 CSS</li> <li>服务器返回 CSS 文件</li> <li>C 渲染 DOM + CSS</li></ul> <h3 id="完全-ssr"><a href="#完全-ssr" class="header-anchor">#</a> 完全 SSR</h3> <p>随着网页功能的增长，需要对不同的用户显示不同的内容。于是，模板引擎出现，服务端获取不同的数据后填入模板引擎，最后将填充完毕的 HTML 返回。这是完全的 Server Side Rendering。</p> <p>以下是完全 SSR 的流程，其中 S 代表服务端，D 代表数据库：</p> <ul><li>C 请求页面</li> <li>S 从 D 读取数据，处理数据，填充模板引擎</li> <li>S 返回填充完毕的 HTML 文件</li> <li>C 解析 HTML 文件为 DOM，请求 CSS</li> <li>服务器返回 CSS 文件</li> <li>C 渲染 DOM + CSS</li></ul> <blockquote><p>在完全 CSR 和 完全 SSR 中，JS 基本都不参与渲染，只负责处理点击等一些小事，所以在流程中直接略去。</p></blockquote> <p>虽然满足了网页功能的需求，但 SSR 还存在这样一些问题：</p> <ul><li>性能较差：每次请求都要重复执行一遍数据逻辑和视图逻辑生成 HTML，即使其中大部分内容都是相同的
<ul><li>也有说法是刷新页面会带来不好的用户体验</li></ul></li> <li>成本较高：Tomcat 等应用服务器相比 Nginx 等 Web 服务器，处理并发的能力较差，因此需要部署更多机器</li> <li>开发混乱：网页开发和后端开发的职责在视图层高度耦合，开发人员难以协作</li></ul> <h3 id="csr"><a href="#csr" class="header-anchor">#</a> CSR</h3> <p>随着客户端能力的提升，我们提出了一个新的思路——前后端分离：视图层的职责完全划分到前端，后端只负责提供数据，而前端负责用 ajax 请求数据，用 JS 修改 DOM 填充数据。这样的方案解决了 SSR 的问题：</p> <ul><li>无需重新请求（刷新）即可更新视图</li> <li>减轻了服务端的负担，利用了客户端的硬件资源</li> <li>前后端职责分明，协作简单</li></ul> <p>这就是我们现在印象中的 CSR，以下是它的流程：</p> <ul><li>C 请求页面</li> <li>服务器返回 HTML 文件</li> <li>C 解析 HTML 文件为 DOM，请求 CSS 和 JS</li> <li>服务器返回 CSS 和 JS 文件</li> <li>C 渲染 DOM + CSS</li> <li>C 执行 JS，请求数据接口</li> <li>S 返回数据</li> <li>C 执行 JS 将数据填入 DOM，重新渲染</li></ul> <p>前端拥有了自己的领地后，大刀阔斧地进行改革，时至今日，组件化的 SPA（Single Page Applicaton，单页应用）已经成为大多数前端应用的模式，它比上面所说的 CSR 更加极限：</p> <ul><li>路由完全由客户端控制，服务器只返回一个 index.html，所有页面全部由客户端动态渲染</li></ul> <p>然而，随着前端复杂度的不断攀升，CSR 也暴露出了一些问题：</p> <ul><li>逻辑过多或数据过多时，客户端渲染速度过慢，影响用户体验（首屏加载问题）</li> <li>网页本质上是一个空的 index.html，不利于 SEO（Search Engine Optimization）</li></ul> <h3 id="ssr"><a href="#ssr" class="header-anchor">#</a> SSR</h3> <p>为了解决客户端性能不足的问题，服务端又一次登上舞台。服务端性能可控，且获取内网的数据更快，基本上能够解决 CSR 的问题。然而，SSR 在大致流程上与完全 SSR 并没有区别，所以同样要面临之前提到的三个问题，但我们已经或多或少有了一些解决办法：</p> <ul><li>对重复请求的内容采取缓存策略
<ul><li>SSG（Static Site Generation），在编译时生成静态资源 HTML，可部署至 CDN 避免实时渲染</li></ul></li> <li>服务器成本可以通过云服务削减</li> <li>现在的 SSR 框架大多基于 Node.js，与前端同构，一份代码既可以在客户端又可以在服务端渲染
<ul><li>所以 SSR 本质上是前端抢了服务器资源来做渲染，并没有抢后端的活儿</li></ul></li></ul> <h2 id="未来方向"><a href="#未来方向" class="header-anchor">#</a> 未来方向</h2> <p>本篇文章的由来就是发现了 Facebook（或许应该叫它 Meta 了）的新理念——React Server Component，引起了我对 Client or Server Rendering 的一些思考和求证，它会是未来的全新方向吗？我们下篇再议。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://blog.csdn.net/weixin_30615567/article/details/112498830" target="_blank" rel="noopener noreferrer">jsp页面post传值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.zhihu.com/question/435921124" target="_blank" rel="noopener noreferrer">如何看待 React Server Component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.jianshu.com/p/2ac2f2aae6ed" target="_blank" rel="noopener noreferrer">服务端渲染SSR（Server Side Rendering）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/2/2021, 8:56:48 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/gstarp-diary/articles/2021-10/26.html" class="prev">
        Reactive Programming
      </a></span> <span class="next"><a href="/gstarp-diary/articles/2021-11/03.html">
        RSC
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gstarp-diary/assets/js/app.da5adff4.js" defer></script><script src="/gstarp-diary/assets/js/2.9d11ca1f.js" defer></script><script src="/gstarp-diary/assets/js/22.6cd3503a.js" defer></script>
  </body>
</html>
