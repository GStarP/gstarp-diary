(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{387:function(v,_,e){"use strict";e.r(_);var t=e(45),r=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"c-s-rendering"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c-s-rendering"}},[v._v("#")]),v._v(" C/S Rendering")]),v._v(" "),e("h2",{attrs:{id:"发展历程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发展历程"}},[v._v("#")]),v._v(" 发展历程")]),v._v(" "),e("h3",{attrs:{id:"完全-csr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完全-csr"}},[v._v("#")]),v._v(" 完全 CSR")]),v._v(" "),e("p",[v._v("最早，网页只有简单的信息展示，没有服务端，只有服务器返回静态资源。这是完全的 Client Side Rendering。")]),v._v(" "),e("p",[v._v("以下是完全 CSR 的流程，其中 C 代表客户端：")]),v._v(" "),e("ul",[e("li",[v._v("C 请求页面")]),v._v(" "),e("li",[v._v("服务器返回 HTML 文件")]),v._v(" "),e("li",[v._v("C 解析 HTML 文件为 DOM，请求 CSS")]),v._v(" "),e("li",[v._v("服务器返回 CSS 文件")]),v._v(" "),e("li",[v._v("C 渲染 DOM + CSS")])]),v._v(" "),e("h3",{attrs:{id:"完全-ssr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完全-ssr"}},[v._v("#")]),v._v(" 完全 SSR")]),v._v(" "),e("p",[v._v("随着网页功能的增长，需要对不同的用户显示不同的内容。于是，模板引擎出现，服务端获取不同的数据后填入模板引擎，最后将填充完毕的 HTML 返回。这是完全的 Server Side Rendering。")]),v._v(" "),e("p",[v._v("以下是完全 SSR 的流程，其中 S 代表服务端，D 代表数据库：")]),v._v(" "),e("ul",[e("li",[v._v("C 请求页面")]),v._v(" "),e("li",[v._v("S 从 D 读取数据，处理数据，填充模板引擎")]),v._v(" "),e("li",[v._v("S 返回填充完毕的 HTML 文件")]),v._v(" "),e("li",[v._v("C 解析 HTML 文件为 DOM，请求 CSS")]),v._v(" "),e("li",[v._v("服务器返回 CSS 文件")]),v._v(" "),e("li",[v._v("C 渲染 DOM + CSS")])]),v._v(" "),e("blockquote",[e("p",[v._v("在完全 CSR 和 完全 SSR 中，JS 基本都不参与渲染，只负责处理点击等一些小事，所以在流程中直接略去。")])]),v._v(" "),e("p",[v._v("虽然满足了网页功能的需求，但 SSR 还存在这样一些问题：")]),v._v(" "),e("ul",[e("li",[v._v("性能较差：每次请求都要重复执行一遍数据逻辑和视图逻辑生成 HTML，即使其中大部分内容都是相同的\n"),e("ul",[e("li",[v._v("也有说法是刷新页面会带来不好的用户体验")])])]),v._v(" "),e("li",[v._v("成本较高：Tomcat 等应用服务器相比 Nginx 等 Web 服务器，处理并发的能力较差，因此需要部署更多机器")]),v._v(" "),e("li",[v._v("开发混乱：网页开发和后端开发的职责在视图层高度耦合，开发人员难以协作")])]),v._v(" "),e("h3",{attrs:{id:"csr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csr"}},[v._v("#")]),v._v(" CSR")]),v._v(" "),e("p",[v._v("随着客户端能力的提升，我们提出了一个新的思路——前后端分离：视图层的职责完全划分到前端，后端只负责提供数据，而前端负责用 ajax 请求数据，用 JS 修改 DOM 填充数据。这样的方案解决了 SSR 的问题：")]),v._v(" "),e("ul",[e("li",[v._v("无需重新请求（刷新）即可更新视图")]),v._v(" "),e("li",[v._v("减轻了服务端的负担，利用了客户端的硬件资源")]),v._v(" "),e("li",[v._v("前后端职责分明，协作简单")])]),v._v(" "),e("p",[v._v("这就是我们现在印象中的 CSR，以下是它的流程：")]),v._v(" "),e("ul",[e("li",[v._v("C 请求页面")]),v._v(" "),e("li",[v._v("服务器返回 HTML 文件")]),v._v(" "),e("li",[v._v("C 解析 HTML 文件为 DOM，请求 CSS 和 JS")]),v._v(" "),e("li",[v._v("服务器返回 CSS 和 JS 文件")]),v._v(" "),e("li",[v._v("C 渲染 DOM + CSS")]),v._v(" "),e("li",[v._v("C 执行 JS，请求数据接口")]),v._v(" "),e("li",[v._v("S 返回数据")]),v._v(" "),e("li",[v._v("C 执行 JS 将数据填入 DOM，重新渲染")])]),v._v(" "),e("p",[v._v("前端拥有了自己的领地后，大刀阔斧地进行改革，时至今日，组件化的 SPA（Single Page Applicaton，单页应用）已经成为大多数前端应用的模式，它比上面所说的 CSR 更加极限：")]),v._v(" "),e("ul",[e("li",[v._v("路由完全由客户端控制，服务器只返回一个 index.html，所有页面全部由客户端动态渲染")])]),v._v(" "),e("p",[v._v("然而，随着前端复杂度的不断攀升，CSR 也暴露出了一些问题：")]),v._v(" "),e("ul",[e("li",[v._v("逻辑过多或数据过多时，客户端渲染速度过慢，影响用户体验（首屏加载问题）")]),v._v(" "),e("li",[v._v("网页本质上是一个空的 index.html，不利于 SEO（Search Engine Optimization）")])]),v._v(" "),e("h3",{attrs:{id:"ssr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssr"}},[v._v("#")]),v._v(" SSR")]),v._v(" "),e("p",[v._v("为了解决客户端性能不足的问题，服务端又一次登上舞台。服务端性能可控，且获取内网的数据更快，基本上能够解决 CSR 的问题。然而，SSR 在大致流程上与完全 SSR 并没有区别，所以同样要面临之前提到的三个问题，但我们已经或多或少有了一些解决办法：")]),v._v(" "),e("ul",[e("li",[v._v("对重复请求的内容采取缓存策略\n"),e("ul",[e("li",[v._v("SSG（Static Site Generation），在编译时生成静态资源 HTML，可部署至 CDN 避免实时渲染")])])]),v._v(" "),e("li",[v._v("服务器成本可以通过云服务削减")]),v._v(" "),e("li",[v._v("现在的 SSR 框架大多基于 Node.js，与前端同构，一份代码既可以在客户端又可以在服务端渲染\n"),e("ul",[e("li",[v._v("所以 SSR 本质上是前端抢了服务器资源来做渲染，并没有抢后端的活儿")])])])]),v._v(" "),e("h2",{attrs:{id:"未来方向"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#未来方向"}},[v._v("#")]),v._v(" 未来方向")]),v._v(" "),e("p",[v._v("本篇文章的由来就是发现了 Facebook（或许应该叫它 Meta 了）的新理念——React Server Component，引起了我对 Client or Server Rendering 的一些思考和求证，它会是未来的全新方向吗？我们下篇再议。")]),v._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[v._v("#")]),v._v(" 参考")]),v._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_30615567/article/details/112498830",target:"_blank",rel:"noopener noreferrer"}},[v._v("jsp页面post传值"),e("OutboundLink")],1)]),v._v(" "),e("p",[e("a",{attrs:{href:"https://www.zhihu.com/question/435921124",target:"_blank",rel:"noopener noreferrer"}},[v._v("如何看待 React Server Component"),e("OutboundLink")],1)]),v._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/2ac2f2aae6ed",target:"_blank",rel:"noopener noreferrer"}},[v._v("服务端渲染SSR（Server Side Rendering）"),e("OutboundLink")],1)])])}),[],!1,null,null,null);_.default=r.exports}}]);